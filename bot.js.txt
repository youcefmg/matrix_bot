// Matrix_Bot - Ø¨ÙˆØª Ù…Ø§ÙŠÙ†ÙƒØ±Ø§ÙØª Ø°ÙƒÙŠ ÙˆÙ…Ù…ØªØ¹!
const mineflayer = require('mineflayer')

// Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨ÙˆØª
const bot = mineflayer.createBot({
  host: 'LionCraftgg.aternos.me',
  port: 50838,
  username: 'Matrix_Bot',
  auth: 'offline',
  version: '1.21.4'
})

// Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„
bot.once('spawn', () => {
  bot.chat('Matrix_Bot Ø¬Ø§Ù‡Ø²! Ø§ÙƒØªØ¨ !help Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙˆØ§Ù…Ø±')
})

// Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
bot.on('chat', (username, message) => {
  if (username === bot.username) return

  if (message === '!help') {
    bot.chat('Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù…ØªØ§Ø­Ø©: !hello, !say <ÙƒÙ„Ø§Ù…>, !jump, !move')
  }

  if (message === '!hello') {
    bot.chat(`Ù‡Ù„Ø§ ${username}ØŒ Ø£Ù†Ø§ Ù…Ø§ØªØ±ÙŠÙƒØ³ Ø¨ÙˆØª ğŸ¤–`)
  }

  if (message.startsWith('!say ')) {
    const text = message.slice(5).trim()
    bot.chat(text.length > 0 ? text : 'Ø§ÙƒØªØ¨ Ø´ÙŠ Ø¨Ø¹Ø¯ !say')
  }

  if (message === '!jump') {
    bot.setControlState('jump', true)
    setTimeout(() => bot.setControlState('jump', false), 1000)
    bot.chat('Ù†Ø·ÙŠØª! ğŸ¦˜')
  }

  if (message === '!move') {
    bot.setControlState('forward', true)
    bot.chat('ÙŠÙ„Ø§ Ù†Ù…Ø´ÙŠ Ø´ÙˆÙŠ... ğŸ•º')
    setTimeout(() => {
      bot.setControlState('forward', false)
      bot.chat('ÙˆÙ‚ÙØª!')
    }, 3000)
  }
})
